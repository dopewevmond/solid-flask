{% extends 'index.html' %}

{% block content %}
    <div class="container">
        <h3 class="py-4">Profile</h3>
        <div class="d-flex">
            <div class="img-avatar-container">
                <img src="{{user.avatar(40)}}" alt="{{user.username}}&apos;s avatar" class="img-fluid img-thumbnail rounded-circle">
            </div>
            <h4 class="user-handle">/{{user.username}}</h4>
        </div>
        <div class="py-1">
            {{ user.followers.count() }} Followers, {{ user.followed.count() }} Following
        </div>

        {% if user == current_user %}
            <p><a href="{{ url_for('edit_profile') }}">Edit</a> profile</p>
        {% elif not current_user.is_following(user) %}
            <form action="{{ url_for('follow', username=user.username) }}" method="post">
                {{ form.hidden_tag() }}
                {{ form.submit(value='Follow') }}
            </form>
        {% else %}
            <form action="{{ url_for('unfollow', username=user.username) }}" method="post">
                {{ form.hidden_tag() }}
                {{ form.submit(value='Unfollow') }}
            </form>
        {% endif %}


        {{ user.joined }}
        <hr>
            {% for post in posts %}
                {% include '_post.html'   %}
            {% endfor %}
    </div>
{% endblock %}